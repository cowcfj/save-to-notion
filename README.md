# Notion Smart Clipper

[![Latest Release](https://img.shields.io/github/v/release/cowcfj/save-to-notion)](https://github.com/cowcfj/save-to-notion/releases/latest)
[![Tests](https://github.com/cowcfj/save-to-notion/actions/workflows/ci.yml/badge.svg)](https://github.com/cowcfj/save-to-notion/actions/workflows/ci.yml)
[![codecov](https://codecov.io/gh/cowcfj/save-to-notion/branch/main/graph/badge.svg)](https://codecov.io/gh/cowcfj/save-to-notion)
[![Chrome Users](https://img.shields.io/chrome-web-store/users/gmelegphcncnddlaeogfhododhbcbmhp)](https://chromewebstore.google.com/detail/save-to-notion-smart-clip/gmelegphcncnddlaeogfhododhbcbmhp)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä¸€å€‹æ™ºèƒ½çš„ Chrome æ“´å±•ï¼Œç”¨æ–¼å°‡ç¶²é å…§å®¹ä¿å­˜åˆ° Notionï¼Œæ”¯æŒå¤šè‰²æ¨™è¨»å’Œæ™ºèƒ½å…§å®¹æå–ã€‚

## ç›®éŒ„

[ğŸš€ å¿«é€Ÿé–‹å§‹](#-å¿«é€Ÿé–‹å§‹) | [ğŸ¬ åŠŸèƒ½å±•ç¤º](#-åŠŸèƒ½å±•ç¤º) | [âœ¨ æ ¸å¿ƒåŠŸèƒ½](#-æ ¸å¿ƒåŠŸèƒ½) | [ğŸ“– ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—) | [ğŸ› ï¸ æŠ€è¡“ç‰¹æ€§](#-æŠ€è¡“ç‰¹æ€§) | [ğŸ”§ é–‹ç™¼èªªæ˜](#-é–‹ç™¼èªªæ˜) | [ğŸ¤ è²¢ç»](#-è²¢ç»)

### ğŸ“¦ æœ€æ–°æ›´æ–°

æŸ¥çœ‹æœ€æ–°åŠŸèƒ½å’Œæ”¹é€²ï¼š[æ‰€æœ‰ç‰ˆæœ¬ç™¼å¸ƒèªªæ˜](https://github.com/cowcfj/save-to-notion/releases)

> ğŸ“– **[å®Œæ•´ä½¿ç”¨æŒ‡å—](USER_GUIDE.md)** | åŒ…å«è©³ç´°æ“ä½œèªªæ˜ã€FAQ å’Œæ•…éšœæ’é™¤

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£æ“´å±•

**æ–¹æ³•ä¸€ï¼šChrome å•†åº—å®‰è£ï¼ˆæ¨è–¦ï¼‰**

- è¨ªå• [Chrome Web Store - Save to Notion](https://chromewebstore.google.com/detail/save-to-notion-smart-clip/gmelegphcncnddlaeogfhododhbcbmhp) ğŸ”—
- é»æ“Šã€ŒåŠ åˆ° Chromeã€å³å¯å®‰è£

**æ–¹æ³•äºŒï¼šé–‹ç™¼è€…æ¨¡å¼å®‰è£**

1. å¾ [Releases](https://github.com/cowcfj/save-to-notion/releases) ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬
2. æ‰“é–‹ `chrome://extensions/`ï¼Œé–‹å•Ÿã€Œé–‹ç™¼è€…æ¨¡å¼ã€
3. é»æ“Šã€Œè¼‰å…¥æœªå°è£é …ç›®ã€ï¼Œé¸æ“‡ä¸‹è¼‰çš„è³‡æ–™å¤¾

### 2. è¨­ç½® Notion Integration

1. é»æ“Šæ“´å±•åœ–æ¨™ â†’ Settings â†’ é€£æ¥åˆ° Notion
2. åœ¨ Notion å‰µå»º Integrationï¼Œè¤‡è£½ API Token
3. è²¼ä¸Š Tokenï¼Œé¸æ“‡ç›®æ¨™è³‡æ–™ä¾†æºï¼ˆNotion ä»‹é¢ä»é¡¯ç¤ºç‚º Databaseï¼‰ï¼Œä¿å­˜è¨­ç½®

### 3. æˆæ¬Šè³‡æ–™ä¾†æºï¼ˆDatabaseï¼‰

åœ¨ Notion è³‡æ–™ä¾†æºï¼ˆNotion ä»‹é¢æ¨™ç¤ºç‚º Databaseï¼‰ä¸­ï¼šé»æ“Šã€Œ...ã€â†’ã€ŒAdd connectionsã€â†’ é¸æ“‡ä½ çš„ Integration

> ï¿½ **è©³ç´°é…ç½®æ­¥é©Ÿè«‹åƒè€ƒ** â†’ [å®Œæ•´ä½¿ç”¨æŒ‡å—](USER_GUIDE.md#-å¿«é€Ÿé–‹å§‹)

---

## ğŸ¬ åŠŸèƒ½å±•ç¤º

> ğŸ’¡ **é»æ“Šåœ–ç‰‡å¯æŸ¥çœ‹å¤§åœ–**

<div align="center">

### ä¸€éµä¿å­˜ç¶²é åˆ° Notion

<a href="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image1-main-feature1280.jpg" target="_blank">
  <img src="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image1-main-feature1280.jpg" alt="æ ¸å¿ƒåŠŸèƒ½å±•ç¤º" width="600">
</a>

### éš¨æ™‚æ¨™è¨˜é‡è¦å…§å®¹

<a href="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image2-highlight-feature1280.jpg" target="_blank">
  <img src="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image2-highlight-feature1280.jpg" alt="æ–‡æœ¬æ¨™è¨»åŠŸèƒ½" width="600">
</a>

### å®Œç¾æ•´åˆ Notion

<a href="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image3-notion-integration1280.jpg" target="_blank">
  <img src="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image3-notion-integration1280.jpg" alt="Notion æ•´åˆå±•ç¤º" width="600">
</a>

### ç°¡å–®è¨­ç½®ï¼Œç«‹å³ä½¿ç”¨

<a href="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image4-easy-setup1280.jpg" target="_blank">
  <img src="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image4-easy-setup1280.jpg" alt="è¨­ç½®ç•Œé¢" width="600">
</a>

### æ™ºèƒ½ç¶²ç«™åœ–æ¨™é¸æ“‡

<a href="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image5-smart-icon1280.jpg" target="_blank">
  <img src="https://raw.githubusercontent.com/cowcfj/save-to-notion/main/promo-images/image5-smart-icon1280.jpg" alt="æ™ºèƒ½åœ–æ¨™" width="600">
</a>

</div>

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ¨ æ–°ä¸€ä»£æ¨™è¨»ç³»çµ±

- **CSS Highlight API**ï¼šä½¿ç”¨ç€è¦½å™¨åŸç”ŸåŠŸèƒ½ï¼Œé›¶ DOM ä¿®æ”¹ï¼Œå®Œç¾è·¨å…ƒç´ æ”¯æŒ
- **å¤šé¡è‰²æ¨™è¨»**ï¼š4 ç¨®é¡è‰²ï¼ˆğŸŸ¡é»ƒã€ğŸŸ¢ç¶ ã€ğŸ”µè—ã€ğŸ”´ç´…ï¼‰ï¼Œé©æ‡‰ä¸åŒä½¿ç”¨å ´æ™¯
- **è‡ªå®šç¾©æ¨£å¼**ï¼šæ”¯æŒèƒŒæ™¯é¡è‰²ã€æ–‡å­—é¡è‰²ã€åº•ç·šä¸‰ç¨®æ¨¡å¼ï¼Œé©æ‡‰æš—è‰²æ¨¡å¼èˆ‡å€‹äººåå¥½
- **è‡ªå‹•é·ç§»**ï¼šæ™ºèƒ½é·ç§»èˆŠæ¨™è¨»ï¼Œè‡ªå‹•å›æ»¾æ©Ÿåˆ¶ï¼Œç¢ºä¿æ•¸æ“šå®‰å…¨
- **å¯¦æ™‚åŒæ­¥**ï¼šæ¨™è¨˜è®Šæ›´å³æ™‚åŒæ­¥åˆ° Notion é é¢
- **é›™é‡åˆªé™¤**ï¼šé›™æ“Šåˆªé™¤æˆ– Ctrl/Cmd + é»æ“Šå¿«é€Ÿåˆªé™¤
- **å¿«é€Ÿè·³è½‰**ï¼šå·¥å…·æ¬„å’Œæ¨™è¨»åˆ—è¡¨é›™é‡ "Open in Notion" æŒ‰éˆ•ï¼Œä¸€éµè·³è½‰åˆ° Notion é é¢

### ğŸ“„ æ™ºèƒ½å…§å®¹æå–

- **Mozilla Readability**ï¼šæ™ºèƒ½æå–æ–‡ç« ä¸»è¦å…§å®¹ï¼Œæ”¯æŒå¤šç¨® CMS ç³»çµ±
- **è‡ªå‹•éæ¿¾**ï¼šè‡ªå‹•éæ¿¾å»£å‘Šå’Œç„¡é—œå…§å®¹
- **å®Œæ•´ä¿å­˜**ï¼šæ”¯æŒè¶…é•·æ–‡ç« ï¼ˆ8000+ å­—ï¼‰ï¼Œè‡ªå‹•åˆ†æ‰¹è™•ç†

### ğŸ–¼ï¸ åœ–ç‰‡å’Œåœ–æ¨™æ”¯æŒ

- **ç¶²ç«™ Icon**ï¼šè‡ªå‹•æå–ç¶²ç«™ favicon/logo é¡¯ç¤ºåœ¨ Notion é é¢æ¨™é¡Œæ—
- **å°é¢åœ–è­˜åˆ¥**ï¼šè‡ªå‹•è­˜åˆ¥æ–‡ç« å°é¢åœ–ï¼ˆæ”¯æŒ 20+ ç¨®é¸æ“‡å™¨ï¼‰
- **æ™ºèƒ½éæ¿¾**ï¼šè‡ªå‹•æ’é™¤ä½œè€…é ­åƒå’Œç„¡é—œåœ–ç‰‡
- **æ ¼å¼æ”¯æŒ**ï¼šæ‡¶åŠ è¼‰ã€éŸ¿æ‡‰å¼ã€ä»£ç† URL è‡ªå‹•è™•ç†

### ğŸ¨ æ¨¡æ¿è‡ªå®šç¾©

- **æ¨™é¡Œæ¨¡æ¿**ï¼šæ”¯æŒè®Šé‡ï¼ˆ`{title}`ã€`{date}`ã€`{domain}` ç­‰ï¼‰
- **å…§å®¹é¸é …**ï¼šå¯æ·»åŠ æ™‚é–“æˆ³å’Œä¾†æºä¿¡æ¯
- **é è¦½åŠŸèƒ½**ï¼šå³æ™‚æŸ¥çœ‹æ¨¡æ¿æ•ˆæœ

### âš™ï¸ ä¾¿æ·è¨­ç½®

- ä¸€éµé€£æ¥ Notion Integration
- è‡ªå‹•è¼‰å…¥è³‡æ–™ä¾†æºåˆ—è¡¨
- API Key é€£æ¥æ¸¬è©¦

---

---

## ï¿½ ä½¿ç”¨æŒ‡å—

**ğŸ“š [å®Œæ•´ä½¿ç”¨æŒ‡å— (USER_GUIDE.md)](USER_GUIDE.md)**

åŒ…å«è©³ç´°çš„æ“ä½œæ­¥é©Ÿã€30+ å¸¸è¦‹å•é¡Œ FAQã€æ•…éšœæ’é™¤æŒ‡å—å’Œæœ€ä½³å¯¦è¸ã€‚æ¨è–¦æ‰€æœ‰ç”¨æˆ¶é–±è®€!

**å¿«é€Ÿéˆæ¥:**

- [ğŸš€ å¿«é€Ÿé–‹å§‹](USER_GUIDE.md#-å¿«é€Ÿé–‹å§‹) - å®‰è£å’Œé…ç½®æ­¥é©Ÿ
- [ğŸ“¦ æ ¸å¿ƒåŠŸèƒ½](USER_GUIDE.md#-æ ¸å¿ƒåŠŸèƒ½) - åŠŸèƒ½è©³ç´°èªªæ˜
- [â“ FAQ](USER_GUIDE.md#-å¸¸è¦‹å•é¡Œ-faq) - å¸¸è¦‹å•é¡Œè§£ç­”
- [ğŸ”§ æ•…éšœæ’é™¤](USER_GUIDE.md#-æ•…éšœæ’é™¤) - å•é¡Œè¨ºæ–·å’Œè§£æ±º
- [ğŸ“ æœ€ä½³å¯¦è¸](USER_GUIDE.md#-æœ€ä½³å¯¦è¸) - å·¥ä½œæµå„ªåŒ–å»ºè­°

---

### ä¿å­˜ç¶²é 

1. ç€è¦½åˆ°æƒ³ä¿å­˜çš„ç¶²é ï¼Œé»æ“Šæ“´å±•åœ–æ¨™
2. é»æ“Šã€ŒSave Pageã€ï¼Œç­‰å¾…å®Œæˆï¼ˆæ“´å±•åœ–æ¨™æœƒé¡¯ç¤ºç¶ è‰² "âœ“"ï¼‰
3. é»æ“Šã€ŒOpen in Notionã€å¯ç›´æ¥æ‰“é–‹ä¿å­˜çš„é é¢

### æ–‡æœ¬æ¨™è¨»

1. é»æ“Šã€ŒStart Highlightingã€å•Ÿç”¨æ¨™è¨»æ¨¡å¼
2. é¸æ“‡æ¨™è¨»é¡è‰²ï¼ˆğŸŸ¡é»ƒè‰²ã€ğŸŸ¢ç¶ è‰²ã€ğŸ”µè—è‰²ã€ğŸ”´ç´…è‰²ï¼‰
3. é¸ä¸­æ–‡å­—è‡ªå‹•å‰µå»ºæ¨™è¨»ï¼ˆæ”¯æŒè·¨æ®µè½é¸æ“‡ï¼‰
4. é»æ“Šã€ŒåŒæ­¥ã€å°‡æ¨™è¨˜ä¿å­˜åˆ° Notion
5. **åˆªé™¤æ¨™è¨»**ï¼š
   - é›™æ“Šæ¨™è¨˜æ–‡æœ¬å¾Œç¢ºèªåˆªé™¤
   - æˆ–æŒ‰ä½ Ctrl/Cmd + é»æ“Šå¿«é€Ÿåˆªé™¤

### è‡ªå®šç¾©æ¨¡æ¿

åœ¨è¨­ç½®é é¢é…ç½®æ¨™é¡Œæ¨¡æ¿ï¼ˆå¦‚ `[{domain}] {title}`ï¼‰å’Œå…§å®¹é¸é …ï¼Œé»æ“Šã€Œé è¦½æ•ˆæœã€æŸ¥çœ‹çµæœ

---

## ğŸ› ï¸ æŠ€è¡“ç‰¹æ€§

- **Manifest V3**ï¼šä½¿ç”¨æœ€æ–°çš„ Chrome æ“´å±•æ¨™æº–
- **CSS Highlight API**ï¼šä½¿ç”¨ç€è¦½å™¨åŸç”Ÿ APIï¼Œé›¶ DOM ä¿®æ”¹
- **æ™ºèƒ½å…§å®¹è­˜åˆ¥**ï¼šå¤šå±¤å›é€€æ©Ÿåˆ¶ç¢ºä¿å…§å®¹æå–æˆåŠŸ
- **åœ–ç‰‡è™•ç†å„ªåŒ–**ï¼šæ”¯æŒç¾ä»£ç¶²ç«™çš„å„ç¨®åœ–ç‰‡è¼‰å…¥æŠ€è¡“
- **æ¨¡æ¿ç³»çµ±**ï¼šéˆæ´»çš„å…§å®¹è‡ªå®šç¾©åŠŸèƒ½
- **éŒ¯èª¤è™•ç†**ï¼šå®Œå–„çš„éŒ¯èª¤è™•ç†å’Œç”¨æˆ¶åé¥‹

---

### é …ç›®çµæ§‹

```
notion-chrome/
â”œâ”€â”€ .github/               # CI èˆ‡ workflowï¼ˆci.ymlã€release-please.ymlï¼‰
â”œâ”€â”€ manifest.json          # æ“´å±•é…ç½®èˆ‡æ¬Šé™ï¼ˆManifest V3ï¼‰
â”œâ”€â”€ rollup.all.config.mjs  # ğŸ†• çµ±ä¸€æ§‹å»ºé…ç½®
â”œâ”€â”€ dist/                  # æ‰“åŒ…ç”¢ç‰© (preloader.js, content.bundle.js)
â”œâ”€â”€ popup/                 # å½ˆå‡ºçª—å£ UIï¼ˆpopup.html, popup.js, popupUI.js, popupActions.jsï¼‰
â”œâ”€â”€ options/               # è¨­ç½®é é¢ UIï¼ˆoptions.html, options.js, options.cssï¼‰
â”œâ”€â”€ scripts/               # æ ¸å¿ƒè…³æœ¬èˆ‡å­æ¨¡çµ„
â”‚   â”œâ”€â”€ background.js
â”‚   â”œâ”€â”€ background/        # ğŸ†• æ¨¡å¡ŠåŒ–èƒŒæ™¯æœå‹™
â”‚   â”‚   â”œâ”€â”€ services/      #     æœå‹™å±¤ (Notion, Storage, Injection, Tab, PageContent)
â”‚   â”‚   â”œâ”€â”€ handlers/      #     æ¥­å‹™è™•ç†å™¨ (Save, Highlight, Migration)
â”‚   â”‚   â””â”€â”€ utils/         #     èƒŒæ™¯å·¥å…· (BlockBuilder)
â”‚   â”œâ”€â”€ content/           # ğŸ†• ES6 æ¨¡å¡ŠåŒ–å…§å®¹æå–ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ index.js       #     å…¥å£æ–‡ä»¶ (åˆä½µ Highlighter)
â”‚   â”‚   â”œâ”€â”€ extractors/    #     æå–å±¤ï¼ˆContentExtractor, ReadabilityAdapter, MetadataExtractor, ImageCollectorï¼‰
â”‚   â”‚   â”œâ”€â”€ converters/    #     è½‰æ›å±¤ï¼ˆConverterFactory, DomConverterï¼‰
â”‚   â”‚   â””â”€â”€ adapters/      #     é©é…å±¤ï¼ˆReadabilityAdapterï¼‰
â”‚   â”œâ”€â”€ config/            # é›†ä¸­åŒ–é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ constants.js   #     çµ±ä¸€å¸¸é‡å®šç¾©
â”‚   â”‚   â”œâ”€â”€ selectors.js   #     DOM é¸æ“‡å™¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ patterns.js    #     æ­£å‰‡è¡¨é”å¼é…ç½®
â”‚   â”‚   â”œâ”€â”€ features.js    #     åŠŸèƒ½é–‹é—œé…ç½®
â”‚   â”‚   â”œâ”€â”€ env.js         #     ç’°å¢ƒæª¢æ¸¬å·¥å…·
â”‚   â”‚   â””â”€â”€ index.js       #     çµ±ä¸€å°å‡ºå…¥å£
â”‚   â”œâ”€â”€ highlighter/       # ğŸ†• ES6 æ¨¡å¡ŠåŒ–æ¨™è¨»ç³»çµ±
â”‚   â”‚   â”œâ”€â”€ index.js       #     å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ core/          #     æ ¸å¿ƒæ¨¡çµ„ï¼ˆRange, HighlightManager, Storage, Style, Interactionï¼‰
â”‚   â”‚   â”œâ”€â”€ ui/            #     UI çµ„ä»¶ï¼ˆToolbar, Components, Stylesï¼‰
â”‚   â”‚   â””â”€â”€ utils/         #     å·¥å…·æ¨¡çµ„ï¼ˆcolor, dom, validation, path, textSearch, domStabilityï¼‰
â”‚   â”œâ”€â”€ performance/       # æ€§èƒ½å„ªåŒ–æ¨¡çµ„
â”‚   â””â”€â”€ utils/             # å·¥å…·æ¨¡çµ„ï¼ˆç›®éŒ„ï¼‰
â”‚       â”œâ”€â”€ Logger.js      # ğŸ†• çµ±ä¸€æ—¥èªŒç³»çµ±
â”‚       â”œâ”€â”€ ErrorHandler.js # ğŸ†• éŒ¯èª¤è™•ç†ï¼ˆå¾ errorHandling é·ç§»ï¼‰
â”‚       â”œâ”€â”€ RetryManager.js # ğŸ†• é‡è©¦ç®¡ç†ï¼ˆå¾ errorHandling é·ç§»ï¼‰
â”‚       â”œâ”€â”€ securityUtils.js # ğŸ†• å®‰å…¨é©—è­‰å·¥å…· (URL, è«‹æ±‚ä¾†æº)
â”‚       â”œâ”€â”€ imageUtils.js  # åœ–ç‰‡è™•ç†
â”‚       â”œâ”€â”€ urlUtils.js    # URL è™•ç†èˆ‡å¸¸é‡
â”‚       â””â”€â”€ pageComplexityDetector.js
â”œâ”€â”€ dist/                  # ğŸ†• æ§‹å»ºç”¢ç‰©
â”‚   â”œâ”€â”€ content.bundle.js         # Content Script çµ±ä¸€æ‰“åŒ…ç‰ˆ
â”‚   â””â”€â”€ *.js.map           # Source maps
â”œâ”€â”€ update-notification/   # æ›´æ–°é€šçŸ¥é é¢èˆ‡é‚è¼¯
â”œâ”€â”€ lib/                   # ç¬¬ä¸‰æ–¹åº«ï¼ˆReadability.jsï¼‰
â”œâ”€â”€ icons/                 # åœ–æ¨™
â”œâ”€â”€ promo-images/          # å®£å‚³åœ–ç‰‡ï¼ˆChrome Web Storeï¼‰
â”œâ”€â”€ tests/                 # æ¸¬è©¦æ–‡ä»¶ï¼ˆ2500+ testsï¼‰
â”œâ”€â”€ README.md              # ç”¨æˆ¶èªªæ˜
â””â”€â”€ CHANGELOG.md           # ç‰ˆæœ¬è®Šæ›´è¨˜éŒ„
```

---

---

## ğŸ”§ é–‹ç™¼èªªæ˜

### é …ç›®è¨­ç½®

```bash
# å…‹éš†å€‰åº«
git clone https://github.com/cowcfj/save-to-notion.git
cd save-to-notion

# å®‰è£ä¾è³´ï¼ˆæœƒè‡ªå‹•åŸ·è¡Œæ§‹å»ºï¼‰
npm install
# â†’ postinstall hook æœƒè‡ªå‹•åŸ·è¡Œ npm run build
# â†’ dist/highlighter-v2.bundle.js èˆ‡ dist/content.bundle.js è‡ªå‹•ç”Ÿæˆ

# è¼‰å…¥ Chrome Extension
# Chrome â†’ æ“´å±•ç¨‹å¼ â†’ é–‹å•Ÿé–‹ç™¼è€…æ¨¡å¼ â†’ è¼‰å…¥æœªå°è£é …ç›® â†’ é¸æ“‡æ­¤ç›®éŒ„
```

### é–‹ç™¼æ¨¡å¼

```bash
# ğŸ”¥ æ¨è–¦ï¼šå¯¦æ™‚ç·¨è­¯ï¼ˆåŒæ™‚ç›£æ§ Highlighter èˆ‡ Content Scriptï¼‰
npm run dev
# æˆ– npm run build:watch

# ä¿®æ”¹æºç¢¼ (scripts/highlighter/ æˆ– scripts/content/)
# â†’ è‡ªå‹•é‡æ–°æ‰“åŒ…åˆ° dist/
# â†’ é‡æ–°è¼‰å…¥ Extension å³å¯çœ‹åˆ°è®Šæ›´

# ä¸€æ¬¡æ€§æ§‹å»ºï¼ˆé–‹ç™¼ç‰ˆæœ¬ï¼Œæœªå£“ç¸®ï¼‰
npm run build

# ç”Ÿç”¢æ§‹å»ºï¼ˆTerser å£“ç¸®ï¼‰
npm run build:prod

# é‹è¡Œæ¸¬è©¦
npm test

# ä»£ç¢¼æª¢æŸ¥
npm run lint
```

### æ§‹å»ºèªªæ˜

**è‡ªå‹•æ§‹å»ºæ©Ÿåˆ¶**ï¼š

- âœ… `npm install` å¾Œè‡ªå‹•åŸ·è¡Œ `npm run build`
- âœ… é–‹ç™¼è€…ç„¡éœ€æ‰‹å‹•æ§‹å»ºå³å¯è¼‰å…¥ Extension
- âœ… `dist/` ç›®éŒ„ä¸è¢«è¿½è¹¤ï¼ˆåœ¨ `.gitignore` ä¸­ï¼‰

**é–‹ç™¼æ™‚çš„æœ€ä½³å¯¦è¸**ï¼š

```bash
# 1. é–‹å•Ÿå¯¦æ™‚ç·¨è­¯ï¼ˆæ¨è–¦ï¼‰
npm run dev

# 2. ä¿®æ”¹ä»£ç¢¼
vim scripts/highlighter/core/Range.js
# æˆ– vim scripts/content/converters/DomConverter.js

# 3. æŸ¥çœ‹ Terminal ç¢ºèªé‡æ–°æ‰“åŒ…
# âœ… created dist/content.bundle.js in 40ms
# âœ… created dist/highlighter-v2.bundle.js in 55ms

# 4. é‡æ–°è¼‰å…¥ Extensionï¼ˆChrome Extension é é¢é»æ“Šåˆ·æ–°åœ–æ¨™ï¼‰
```

### ä¸»è¦çµ„ä»¶

- **background.js**ï¼šè™•ç†æ“´å±•é‚è¼¯ã€API èª¿ç”¨ã€æ¨¡æ¿è™•ç†ã€æ›´æ–°é€šçŸ¥
- **content/**ï¼šğŸ†• æ¨¡å¡ŠåŒ–å…§å®¹æå–ç³»çµ±ï¼ˆES6 æ¨¡å¡Šï¼‰
  - ä½ç½®ï¼š`scripts/content/` (ES6 æ¨¡å¡Š)
  - æ§‹å»ºç”¢ç‰©ï¼š`dist/content.bundle.js` (211KB)
  - **extractors/**ï¼šæå–å±¤ï¼ˆContentExtractor, ReadabilityAdapter, MetadataExtractor, ImageCollectorï¼‰
  - **converters/**ï¼šè½‰æ›å±¤ï¼ˆConverterFactory, DomConverterï¼‰
  - **adapters/**ï¼šé©é…å±¤ï¼ˆReadabilityAdapter æ•´åˆ Readability.jsï¼‰
- **popup/**ï¼šğŸ†• æ¨¡å¡ŠåŒ–å½ˆå‡ºé é¢é‚è¼¯
  - ä½ç½®ï¼š`popup/` (ES6 æ¨¡å¡Š)
  - è·è²¬ï¼šActions (API èª¿ç”¨)ã€UI (DOM æ›´æ–°)
- **æ™ºæ…§å‹æ³¨å…¥ç­–ç•¥ (Smart Injection)**ï¼š
  - **Preloader**ï¼š`< 5KB` å…¨åŸŸæ³¨å…¥ï¼Œè² è²¬å¿«æ·éµç›£è½èˆ‡æ€§èƒ½é ç†±ã€‚
  - **æŒ‰éœ€æ³¨å…¥**ï¼šä¸»ç¨‹å¼ `content.bundle.js` åƒ…åœ¨é é¢æœ‰æ¨™è¨»æˆ–ç”¨æˆ¶ä¸»å‹•é»æ“Šæ™‚æ‰è¼‰å…¥ï¼Œå¤§å¹…é™ä½è¨˜æ†¶é«”ä½”ç”¨ã€‚
- **highlighter-v2.js**ï¼šåŸºæ–¼ CSS Highlight API çš„æ¨™è¨»å¼•æ“ï¼ˆå·²æ¨¡çµ„åŒ–ï¼‰
  - ä½ç½®ï¼š`scripts/highlighter/` (ES6 æ¨¡å¡Š)
  - æ§‹å»ºç”¢ç‰©ï¼š`dist/highlighter-v2.bundle.js` (15KB å£“ç¸®ç‰ˆ)
- **config/**ï¼šğŸ†• é›†ä¸­åŒ–é…ç½®ç®¡ç†
  - `constants.js`ï¼šçµ±ä¸€å¸¸é‡å®šç¾©ï¼ˆåœ–ç‰‡é©—è­‰ã€æ€§èƒ½å„ªåŒ–ã€éŒ¯èª¤è™•ç†ï¼‰
  - `selectors.js`ï¼šDOM é¸æ“‡å™¨é…ç½®ï¼ˆæŠ€è¡“å…§å®¹æ¨™è¨˜ï¼‰
- **options**ï¼šğŸ†• æ¨¡å¡ŠåŒ–è¨­ç½®é é¢æ ¸å¿ƒé‚è¼¯
  - ä½ç½®ï¼š`scripts/options/` (ES6 æ¨¡å¡Šï¼šUIManager, AuthManager, DataSourceManager, StorageManager, MigrationTool)
- **utils/Logger.js**ï¼šğŸ†• çµ±ä¸€æ—¥èªŒç³»çµ±ï¼Œæ”¯æŒç’°å¢ƒæ„ŸçŸ¥èˆ‡èª¿è©¦æ¨¡å¼æ§åˆ¶ï¼ˆ`scripts/utils/` ç›®éŒ„ä¸‹ï¼‰

### æ§‹å»ºæµç¨‹

æœ¬é …ç›®ä½¿ç”¨ **Rollup** é€²è¡Œæ¨¡çµ„æ‰“åŒ…ï¼š

- **é–‹ç™¼ç’°å¢ƒ**ï¼š`npm run build:watch`
  - å¯¦æ™‚ç›£æ§æ–‡ä»¶è®Šæ›´
  - ä¸å£“ç¸®ä»£ç¢¼
  - inline source map

- **ç”Ÿç”¢ç’°å¢ƒ**ï¼š`npm run build:prod`
  - Terser å£“ç¸®ï¼ˆ-91% é«”ç©ï¼‰
  - å¤–éƒ¨ source map (`.map` æ–‡ä»¶)
  - ä¿ç•™ console.logï¼ˆé™¤éŒ¯ç”¨ï¼‰
  - ä¿ç•™é—œéµå…¨å±€è®Šæ•¸

**æ§‹å»ºé…ç½®**ï¼š`rollup.config.mjs`

### æ ¸å¿ƒæŠ€è¡“ç‰¹é»

- **CSS Highlight API**ï¼šä½¿ç”¨ç€è¦½å™¨åŸç”Ÿ APIï¼Œé›¶ DOM ä¿®æ”¹
- **ES6 æ¨¡çµ„åŒ–**ï¼šhighlighter å·²é‡æ§‹ç‚º 9 å€‹ç¨ç«‹æ¨¡çµ„
- **æœç´¢å¼é¸æ“‡å™¨**ï¼šå¯¦æ™‚æœç´¢ã€éµç›¤å°èˆªã€é«˜äº®åŒ¹é…ï¼ˆv2.8.0ï¼‰
- **URL æ­£è¦åŒ–**ï¼šç§»é™¤è¿½è¹¤åƒæ•¸ï¼ˆ`utm_*`ã€`gclid`ã€`fbclid` ç­‰ï¼‰
- **æ™ºèƒ½é·ç§»**ï¼šè‡ªå‹•å¾èˆŠç‰ˆæœ¬å‡ç´šï¼Œæ”¯æŒå›æ»¾æ©Ÿåˆ¶
- **Range API**ï¼šç²¾ç¢ºçš„æ–‡æœ¬ä½ç½®è¨˜éŒ„å’Œæ¢å¾©

---

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Request ä¾†æ”¹é€²é€™å€‹é …ç›®ï¼

## ğŸ”’ éš±ç§æ”¿ç­–

è«‹æŸ¥çœ‹æˆ‘å€‘çš„ [éš±ç§æ”¿ç­–](PRIVACY.md) äº†è§£æ›´å¤šè³‡è¨Šã€‚

## ğŸ“„ è¨±å¯è­‰

MIT License
