<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save to Notion - è¨­å®š</title>
    <link rel="stylesheet" href="options.css">
    <style>
        /* ç°¡åŒ–æˆæ¬Šå°ˆç”¨æ¨£å¼ */
        .auth-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .auth-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .auth-section h3 {
            margin-top: 0;
            color: #495057;
        }
        
        .status {
            padding: 8px 12px;
            border-radius: 4px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .status.authorized {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.unauthorized {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .user-details {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
        }
        
        .user-details p {
            margin: 5px 0;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #495057;
        }
        
        .form-group input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            text-decoration: none;
            display: inline-block;
            transition: background-color 0.2s;
        }
        
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0056b3;
        }
        
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #1e7e34;
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #545b62;
        }
        
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .status-message {
            padding: 10px 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-weight: bold;
        }
        
        .status-message.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-message.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-message.warning {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .status-message.info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .database-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            background: white;
        }
        
        .database-item {
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .database-item:last-child {
            border-bottom: none;
        }
        
        .database-info h4 {
            margin: 0 0 5px 0;
            color: #495057;
        }
        
        .database-info p {
            margin: 2px 0;
            font-size: 12px;
            color: #6c757d;
        }
        
        .database-info a {
            color: #007bff;
            text-decoration: none;
        }
        
        .database-info a:hover {
            text-decoration: underline;
        }
        
        .select-database {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .select-database:hover {
            background-color: #1e7e34;
        }
        
        .help-text {
            font-size: 12px;
            color: #6c757d;
            margin-top: 5px;
        }
        
        .divider {
            text-align: center;
            margin: 20px 0;
            position: relative;
        }
        
        .divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #dee2e6;
        }
        
        .divider span {
            background: white;
            padding: 0 15px;
            color: #6c757d;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <h1>Save to Notion - è¨­å®š</h1>
        
        <!-- ç‹€æ…‹é¡¯ç¤ºå€åŸŸ -->
        <div class="auth-section">
            <h3>æˆæ¬Šç‹€æ…‹</h3>
            <div id="auth-status" class="status unauthorized">âŒ æœªæˆæ¬Š</div>
            <div id="user-info">
                <p>è«‹é¸æ“‡æˆæ¬Šæ–¹å¼</p>
            </div>
            <div id="status-message" class="status-message"></div>
        </div>
        
        <!-- Cookie ç™»å…¥å€åŸŸ -->
        <div id="login-section" class="auth-section">
            <h3>ğŸª Cookie ç™»å…¥</h3>
            <p>å¦‚æœæ‚¨å·²ç¶“åœ¨ç€è¦½å™¨ä¸­ç™»å…¥ Notionï¼Œå¯ä»¥ä½¿ç”¨æ­¤æ–¹å¼å¿«é€Ÿæˆæ¬Šã€‚</p>
            <div class="button-group">
                <button id="login-button" class="btn btn-primary">æ‰“é–‹ Notion ç™»å…¥é é¢</button>
                <button id="refresh-button" class="btn btn-secondary">åˆ·æ–°æˆæ¬Šç‹€æ…‹</button>
            </div>
            <div class="help-text">
                é»æ“ŠæŒ‰éˆ•å¾Œï¼Œè«‹åœ¨æ–°é–‹å•Ÿçš„é é¢ä¸­ç™»å…¥ Notionï¼Œç„¶å¾Œè¿”å›æ­¤é é¢é»æ“Šã€Œåˆ·æ–°æˆæ¬Šç‹€æ…‹ã€ã€‚
            </div>
        </div>
        
        <div class="divider">
            <span>æˆ–</span>
        </div>
        
        <!-- æ‰‹å‹•è¨­ç½®å€åŸŸ -->
        <div id="manual-section" class="auth-section">
            <h3>ğŸ”‘ æ‰‹å‹• API è¨­ç½®</h3>
            <p>ä½¿ç”¨ Notion Integration çš„ API é‡‘é‘°é€²è¡Œæˆæ¬Šï¼ŒåŠŸèƒ½æ›´å®Œæ•´ã€‚</p>
            
            <div class="form-group">
                <label for="api-key">Notion API é‡‘é‘°:</label>
                <input type="password" id="api-key" placeholder="secret_xxxxxxxxxx">
                <div class="help-text">
                    åœ¨ <a href="https://www.notion.so/my-integrations" target="_blank">Notion Integrations</a> é é¢å‰µå»ºä¸¦ç²å– API é‡‘é‘°
                </div>
            </div>
            
            <div class="form-group">
                <label for="database-id">é è¨­è³‡æ–™åº« ID:</label>
                <input type="text" id="database-id" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx">
                <div class="help-text">
                    å¯ä»¥ç•™ç©ºï¼Œç¨å¾Œé€šéæœç´¢åŠŸèƒ½é¸æ“‡è³‡æ–™åº«
                </div>
            </div>
            
            <div class="button-group">
                <button id="test-api" class="btn btn-secondary">æ¸¬è©¦ API é‡‘é‘°</button>
                <button id="save-manual" class="btn btn-success">ä¿å­˜è¨­ç½®</button>
            </div>
        </div>
        
        <!-- è³‡æ–™åº«æœç´¢å€åŸŸ -->
        <div id="search-section" class="auth-section" style="display: none;">
            <h3>ğŸ“Š æœç´¢è³‡æ–™åº«</h3>
            <p>æœç´¢æ‚¨çš„ Notion è³‡æ–™åº«ä¸¦é¸æ“‡ä½œç‚ºé è¨­ä¿å­˜ä½ç½®ã€‚</p>
            
            <div class="form-group">
                <label for="search-input">æœç´¢é—œéµå­—:</label>
                <input type="text" id="search-input" placeholder="è¼¸å…¥è³‡æ–™åº«åç¨±æˆ–é—œéµå­—">
            </div>
            
            <div class="button-group">
                <button id="search-button" class="btn btn-primary">æœç´¢è³‡æ–™åº«</button>
            </div>
            
            <div id="database-list" class="database-list" style="margin-top: 15px;">
                <!-- æœç´¢çµæœå°‡é¡¯ç¤ºåœ¨é€™è£¡ -->
            </div>
        </div>
        
        <!-- æ§åˆ¶æŒ‰éˆ•å€åŸŸ -->
        <div class="auth-section">
            <h3>æ§åˆ¶é¸é …</h3>
            <div class="button-group">
                <button id="logout-button" class="btn btn-danger" style="display: none;">ç™»å‡º</button>
                <button id="refresh-button" class="btn btn-secondary" style="display: none;">åˆ·æ–°ç‹€æ…‹</button>
            </div>
        </div>
        
        <!-- èªªæ˜å€åŸŸ -->
        <div class="auth-section">
            <h3>ğŸ“– ä½¿ç”¨èªªæ˜</h3>
            <div style="line-height: 1.6;">
                <h4>Cookie ç™»å…¥æ–¹å¼:</h4>
                <ul>
                    <li>é©åˆå€‹äººä½¿ç”¨ï¼Œè¨­ç½®ç°¡å–®</li>
                    <li>éœ€è¦åœ¨ç€è¦½å™¨ä¸­ä¿æŒ Notion ç™»å…¥ç‹€æ…‹</li>
                    <li>åŠŸèƒ½ç›¸å°æœ‰é™ï¼Œä¸»è¦æ”¯æ´åŸºæœ¬çš„é é¢ä¿å­˜</li>
                </ul>
                
                <h4>æ‰‹å‹• API è¨­ç½®:</h4>
                <ul>
                    <li>åŠŸèƒ½å®Œæ•´ï¼Œæ”¯æ´è³‡æ–™åº«æœç´¢å’Œé«˜ç´šåŠŸèƒ½</li>
                    <li>éœ€è¦å‰µå»º Notion Integration ä¸¦ç²å– API é‡‘é‘°</li>
                    <li>æ›´ç©©å®šå¯é ï¼Œæ¨è–¦ç”¨æ–¼é‡è¦ç”¨é€”</li>
                </ul>
                
                <h4>ç²å– API é‡‘é‘°æ­¥é©Ÿ:</h4>
                <ol>
                    <li>è¨ªå• <a href="https://www.notion.so/my-integrations" target="_blank">Notion Integrations</a></li>
                    <li>é»æ“Šã€Œ+ New integrationã€å‰µå»ºæ–°çš„æ•´åˆ</li>
                    <li>å¡«å¯«åç¨±ä¸¦é¸æ“‡å·¥ä½œç©ºé–“</li>
                    <li>è¤‡è£½ç”Ÿæˆçš„ã€ŒInternal Integration Tokenã€</li>
                    <li>åœ¨è³‡æ–™åº«é é¢ä¸­é‚€è«‹æ‚¨çš„ Integration</li>
                </ol>
            </div>
        </div>
    </div>
    
    <script src="options-simple-auth.js"></script>
</body>
</html>